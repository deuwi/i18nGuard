name: "Welcome new sponsor"
on:
  sponsorship:
    types: [created]
jobs:
  thank:
    runs-on: ubuntu-latest
    steps:
      - name: Thank new sponsor
        uses: actions/github-script@v7
        with:
          script: |
            const sponsor = context.payload.sponsorship?.sponsor?.login;
            const tier = context.payload.sponsorship?.tier?.name;
            if (!sponsor) return;
            const issueTitle = `üôè Merci @${sponsor} ‚Äî Bienvenue !`;
            const issueBody = [
              `Merci @${sponsor} d'avoir sponsoris√© le projet (palier: ${tier || 'n/a'}).`,
              '',
              '- Rejoindre le salon ‚ÄúSponsors‚Äù: <lien Discord/Discussion>',
              '- Indiquez vos besoins via le template ‚ÄúSponsor priority request‚Äù.',
              '',
              '_Ticket cr√©√© automatiquement; vous pouvez le fermer._'
            ].join('\n');
            await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: issueTitle,
              body: issueBody,
              labels: ['sponsor', 'automated']
            });